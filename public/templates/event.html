<ol class="breadcrumb">
    <li><a href="/#!/events">Événements</a></li>
    <li class="active">Détail de l'événement</li>
</ol>

<h1>{{ event.sport.name }} {{event.gender | gender}}</h1>
<p>Date: {{event.dateAsString | date:'dd-MM-yyyy HH:mm'}}</p>

<h2>Billets</h2>
<table class="table">
    <thead>
    <tr>
        <th>Prix</th>
        <th>Billets disponibles</th>
        <th>Type</th>
        <th>Section/Quantité</th>
        <th>Siège</th>
    </tr>
    </thead>
    <tbody>
    <tr class="category" ng-repeat="category in event.categories">
        <td class="price">{{category.price}}$</td>
        <td class="numberOfTickets">{{category.numberOfTickets}}</td>
        <td>
            <p>{{category.type | categoryType}}</p>
        </td>

        <td>
            <input type="number" step="1" ng-model="quantity[category.id]" ng-init="quantity[category.id]=1"
                   class="form-control category-quantity" min="1" max="{{category.numberOfTickets}}"
                   ng-hide="category.type == 'SEAT'"
                   ng-disabled="category.numberOfTickets == 0">
            <select id="{{sectionsByCategories[category.id].name}}"
                    class="form-control"
                    ng-change="apiCall()"
                    ng-model="sectionsByCategories[category.id].value"
                    ng-options="s for s in sectionsByCategories[category.id].values"
                    ng-hide="category.type == 'GENERAL_ADMISSION'">
                <option value="">Section...</option>
            </select>
        </td>

        <td>
            <select id="{{ticketsByCategories[category.id].name}}"
                    class="form-control"
                    ng-model="ticketsByCategories[category.id].value"
                    ng-hide="category.type == 'GENERAL_ADMISSION'">
                <option value="">Siège disponible...</option>
                <option value="{{ticket.id}}"
                        ng-repeat="ticket in ticketsByCategories[category.id].values">
                    {{ticket.seat}}
                </option>
            </select>
        </td>

        <td>
            <button class="btn btn-success category-add"
                    ng-click="addToCart(ticketsByCategories[category.id].value, category, quantity[category.id])"
                    ng-hide="category.numberOfTickets == 0"
                    ng-disabled="!ticketsByCategories[category.id].value && category.type == 'SEAT'">
                Ajouter au panier
            </button>
            <a href="/#!/tickets/{{ticketsByCategories[category.id].value}}"
               ng-disabled="!ticketsByCategories[category.id].value && category.type == 'SEAT'"
               ng-hide="category.type == 'GENERAL_ADMISSION'"
               class="btn btn-info">
                Détails
            </a>
        </td>
    </tr>
    </tbody>
</table>
